<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Party Hall Booking</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Party Hall Booking</h1>

    <div class="login-container">
        <h2>Login</h2>
        <form id="loginForm">
            <input type="text" id="username" placeholder="Username" required>
            <input type="password" id="password" placeholder="Password" required>
            <select id="role" required>
                <option value="">Select Role</option>
                <option value="user">User</option>
                <option value="admin">Admin</option>
            </select>
            <button type="submit">Login</button>
        </form>
        <p id="registerLink" style="display:none;">
            Don't have an account? <a href="#" id="createAccountBtn">Create Account</a>
        </p>
    </div>

    <div class="register-container" style="display:none;">
        <h2>Create Account</h2>
        <form id="registerForm">
            <input type="text" id="regUsername" placeholder="Username" required>
            <input type="password" id="regPassword" placeholder="Password" required>
            <button type="submit">Create Account</button>
        </form>
        <p><a href="#" id="backToLogin">Back to Login</a></p>
    </div>

    <script>
        let users = JSON.parse(localStorage.getItem('users')) || [];

        const loginForm = document.getElementById('loginForm');
        const registerLink = document.getElementById('registerLink');
        const createAccountBtn = document.getElementById('createAccountBtn');
        const registerContainer = document.querySelector('.register-container');
        const loginContainer = document.querySelector('.login-container');
        const backToLogin = document.getElementById('backToLogin');

        document.getElementById('role').addEventListener('change', function(){
            if(this.value === 'user'){
                registerLink.style.display = 'block';
            } else {
                registerLink.style.display = 'none';
            }
        });

        createAccountBtn.addEventListener('click', function(e){
            e.preventDefault();
            loginContainer.style.display = 'none';
            registerContainer.style.display = 'block';
        });

        backToLogin.addEventListener('click', function(e){
            e.preventDefault();
            loginContainer.style.display = 'block';
            registerContainer.style.display = 'none';
        });

        loginForm.addEventListener('submit', function(e){
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const role = document.getElementById('role').value;

            if(role === 'admin'){
                if(username === 'admin' && password === 'admin'){
                    alert("Admin Login Successful!");
                    window.location.href = "admin.html";
                } else {
                    alert("Invalid Admin Credentials!");
                }
            } else if(role === 'user'){
                const user = users.find(u => u.username === username && u.password === password);
                if(user){
                    alert("User Login Successful!");
                    window.location.href = "user.html";
                } else {
                    alert("Invalid User Credentials!");
                }
            } else {
                alert("Please select a role!");
            }
        });

        document.getElementById('registerForm').addEventListener('submit', function(e){
            e.preventDefault();
            const regUsername = document.getElementById('regUsername').value;
            const regPassword = document.getElementById('regPassword').value;

            if(users.some(u => u.username === regUsername)){
                alert("Username already exists!");
                return;
            }

            users.push({username: regUsername, password: regPassword});
            localStorage.setItem('users', JSON.stringify(users));
            alert("Account created successfully! Please login.");
            registerContainer.style.display = 'none';
            loginContainer.style.display = 'block';
        });
    </script>
</body>
</html>
